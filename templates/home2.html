<!DOCTYPE html>
<html>
    <head>
        <title>FindIt A&M</title>
        <link rel="icon" type="image/x-icon" href="/static/A&Mfavicon.ico">
        <meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">     
        <link rel="stylesheet" href="static/style.css">
    </head>  
        <style>
                #banner{
                width:100%;
                height:20rem;
                object-fit:cover;
            }
                #googleMap {
                width: 100%;
                height: 25rem; /* Set map height */
                padding-bottom: 20px; /* Adjust this value for desired padding */
            }
                .navbar {
                color:rgb(120,0,0); /* Maroon color */
                font-family: 'Arial', sans-serif; /* Change font-family to your choice */
                font-size: 1.5rem; /* Increase font size */
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Add shadow */
            }

        </style>
    <body>
        {% include 'nav.html' %}
        <div class="container" style="color: rgb(120,0,0);">
            <h1 class="text-center">FindIt A&M</h1>
            <img class="img-fluid" id="banner" src=/static/banner.jpg height="360">
            <p class="lead">
                Welcome to FindIt A&M, your ultimate guide to 
                uncovering the hidden gems of Texas A&M University! 
                Whether you’re searching for the best study spots, 
                vending machines, or specialized resources, our 
                platform is designed to help you navigate the campus 
                with ease. Explore our curated listings and 
                interactive maps to discover the niche places 
                that make A&M a vibrant and engaging community. 
                Let us help you find exactly what you’re looking 
                for, from cozy corners to off-the-beaten-path 
                attractions!
            </p>
            <h2 class="text-center" mt-2 mb-4>blah blah blah</h2>
            <div class="text-center">
                <button class="btn btn-light">Give us MORE!</button>
                <p>copyright?</p>
            </div>
            <div style="text-align:center" style="padding: 1rem;">
                <button type="button" onclick = "filter()" style="margin: 0 auto; padding-bottom: 1 rem;">Filter</button>
                <select name="filter" id="filter" style="margin: 0 auto;">
                    <option value="printer">Printer</option>
                    <option value="microwave">Microwaves</option>
                    <option value="computer">Computer</option>
                    <option value="vending_machine">Vending Machine</option>
                    <option value="aggie_express">Aggie Express</option>
                </select> 

            </div>
        </div>
<script>src='script.js'</script>

<div id="map"></div>
<script async>
    var map
    async function myMap() {
    var mapProp= {
    center:new google.maps.LatLng(30.6097085,-96.3538729),
      zoom:16,
      mapId: "2811d00f86aaab58",
    };
    map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
    }
    var markers = []
    async function getItems(){
        const {AdvancedMarkerElement} = await google.maps.importLibrary("marker");
        let value = document.getElementById("filter").value
        let element = await fetch(`/${value}`).then((response) => response.json()).then((responseJSON) => {
            // console.log(responseJSON)
            // console.log(responseJSON.length)
            const container = document.getElementById("itemContainer")
            const listTitle = document.createElement('div')
            listTitle.textContent = `ALL ${value.toUpperCase()} LOCATIONS`
            listTitle.style="text-align: center; padding: 1rem;"
            container.appendChild(listTitle)
            for(let i = 0; i < responseJSON.length; i++){
                const newDiv = document.createElement('div')
                const newP = document.createElement('p')
                if(i%2==0){
                    newDiv.style ="text-align: center; padding: 0.25rem; margin: 0 auto; width: 50%;"
                }
                else{
                    newDiv.style="text-align: center; background-color:lightgrey; padding: 0.25rem; margin: 0 auto; width: 50%"
                }
                newP.textContent = `${value} ${i}: ${responseJSON[i].location.building}`
                newP.style="margin: 0 auto"
                container.appendChild(newDiv)
                newDiv.appendChild(newP)

                // map = document.getElementById("googleMap")
                // console.log(map)
                // console.log(responseJSON[i].location.latitude)
                
                const marker = new AdvancedMarkerElement({
                    map,
                    position: {lat: responseJSON[i].location.latitude, lng: responseJSON[i].location.longitude},
                })
                markers.push(marker)
            }
        })
    }
    function filter(){
        const element = document.getElementById("itemContainer")
        while(element.firstChild){
            element.removeChild(element.firstChild)
        }
        for(let i = 0; i < markers.length; i++){
            markers[i].map = null;
        }
        getItems()
    }

    </script>
<script async
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCG726Rj10Q_Oq4OT_FgF0HStvJ0gLT2Tk&loading=async&callback=myMap">

  </script>
  <div id="googleMap" style="width:100%; height:25rem;"></div>
  <div id="itemContainer"></div>
    </body>

</html>